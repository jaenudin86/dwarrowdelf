<UserControl x:Class="Dwarrowdelf.Client.UI.BuildingEditControl"
			 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
			 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
			 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
			 xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
			 xmlns:ui="clr-namespace:Dwarrowdelf.Client.UI"
			 mc:Ignorable="d" 
			 d:DesignHeight="472" d:DesignWidth="748">

	<UserControl.Resources>
		<ui:CapitalizeConverter x:Key="converter"/>
	</UserControl.Resources>

	<DockPanel>

		<GroupBox Header="Info" DockPanel.Dock="Top">
			<StackPanel Orientation="Vertical">

				<UniformGrid Columns="2">
					<TextBlock>BuildingID</TextBlock>
					<TextBlock Text="{Binding BuildingID}" />

					<TextBlock>BuildingState</TextBlock>
					<TextBlock Text="{Binding BuildingState}" />

					<TextBlock>Area</TextBlock>
					<TextBlock Text="{Binding Area}" />
				</UniformGrid>

			</StackPanel>
		</GroupBox>


		<GroupBox Header="Build queue" DockPanel.Dock="Left">
			<ListBox ItemsSource="{Binding BuildOrderQueue}">
				<ListBox.ItemTemplate>
					<DataTemplate>
						<TextBlock Text="{Binding BuildableItem.ItemInfo.Name, Converter={StaticResource converter}}" />
					</DataTemplate>
				</ListBox.ItemTemplate>
			</ListBox>
		</GroupBox>

		<GroupBox Header="Build" DockPanel.Dock="Right">
			<Grid>
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="1*" />
					<ColumnDefinition Width="1*" />
					<ColumnDefinition Width="1*" />
				</Grid.ColumnDefinitions>

				<Grid.RowDefinitions>
					<RowDefinition Height="Auto" />
					<RowDefinition Height="*" />
				</Grid.RowDefinitions>

				<TextBlock Grid.Column="0" Grid.Row="0" Text="Items" />

				<ListBox Name="itemListBox" Grid.Column="0" Grid.Row="1" ItemsSource="{Binding BuildingInfo.BuildableItems}">
					<ListBox.ItemTemplate>
						<DataTemplate>
							<TextBlock Text="{Binding Path=ItemInfo.Name, Converter={StaticResource converter}}" />
						</DataTemplate>
					</ListBox.ItemTemplate>
				</ListBox>

				<TextBlock Grid.Column="1" Grid.Row="0" DataContext="{Binding Path=SelectedValue, ElementName=itemListBox}">
					<TextBlock Text="{Binding Path=Name, Converter={StaticResource converter}}" />
					<TextBlock Text=" materials" />
				</TextBlock>

				<ListView Grid.Column="1" Grid.Row="1" DataContext="{Binding Path=SelectedValue, ElementName=itemListBox}" ItemsSource="{Binding Path=BuildMaterials}">
					<ListView.View>
						<GridView AllowsColumnReorder="true">
							<GridViewColumn DisplayMemberBinding="{Binding Path=ItemID}" Header="ItemID"/>
							<GridViewColumn DisplayMemberBinding="{Binding Path=ItemCategory}" Header="ItemCategory"/>
							<GridViewColumn DisplayMemberBinding="{Binding Path=MaterialID}" Header="MaterialID"/>
							<GridViewColumn DisplayMemberBinding="{Binding Path=MaterialCategory}" Header="MaterialCategory"/>
						</GridView>
					</ListView.View>
				</ListView>

				<StackPanel Orientation="Vertical"  Grid.Column="2" Grid.Row="1">
					<Button Content="Add" Click="Button_Click" />
				</StackPanel>
			</Grid>
		</GroupBox>

	</DockPanel>
</UserControl>
