<Window x:Class="MyGame.MainWindow"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:local="clr-namespace:MyGame"
	Title="Window1" Height="424" Width="608"
    DataContext="{x:Static local:GameData.Data}">

	<DockPanel>

		<ToolBarTray DockPanel.Dock="Top">
			<ToolBar>
				<ToggleButton IsChecked="{Binding Path=DisableLOS}">Disable Client LOS</ToggleButton>
				<ToggleButton IsChecked="{Binding Path=ShowChangedTiles}">Show New Tiles</ToggleButton>
                <Button Click="OnClearLogClicked">Clear Log</Button>
            </ToolBar>
		</ToolBarTray>

		<Grid>
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="6*"/>
				<ColumnDefinition Width="1*"/>
			</Grid.ColumnDefinitions>

			<Grid.RowDefinitions>
				<RowDefinition Height="3*"/>
				<RowDefinition Height="1*"/>
			</Grid.RowDefinitions>

			<local:MapControl x:Name="map" Grid.Column="0" Grid.Row="0" BorderThickness="0" Focusable="True" />
            
			<StackPanel Grid.Column="1" Grid.RowSpan="2">
                <TextBlock>
					Turn <TextBlock Text="{Binding Path=TurnNumber}" />
				</TextBlock>
				<ListBox Name="actionListBox" ItemsSource="{Binding Path=ActionCollection}"/>
				<ListBox Name="inventoryListBox" 
						 ItemsSource="{Binding Path=Player.Inventory}">
					<ListBox.ItemTemplate>
						<DataTemplate>
							<StackPanel Orientation="Horizontal">
								<StackPanel.ToolTip>
									<StackPanel Orientation="Vertical">
										<TextBlock Text="{Binding Path=Name}" HorizontalAlignment="Center" />
										<Image Source="{Binding Path=Drawing}" Stretch="Uniform" />
									</StackPanel>
								</StackPanel.ToolTip>
								<TextBlock Text="{Binding Path=Name}" />
								<Image Source="{Binding Path=Drawing}" Stretch="Uniform" Height="20" />
							</StackPanel>
						</DataTemplate>
					</ListBox.ItemTemplate>
				</ListBox>

                <ComboBox ItemsSource="{Binding Path=Objects}" SelectionChanged="ComboBox_SelectionChanged" IsReadOnly="True">
                    <ComboBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="{Binding Path=Name}" />
                                <Image Source="{Binding Path=Drawing}" Stretch="Uniform" Height="20" />
                            </StackPanel>
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>
            </StackPanel>

			<TextBox Name="logTextBox" Grid.ColumnSpan="2" Grid.Row="1" VerticalScrollBarVisibility="Visible"
				 IsReadOnly="True" FontFamily="Lucida Console" AcceptsTab="True" AcceptsReturn="True" HorizontalScrollBarVisibility="Auto" />

			<GridSplitter HorizontalAlignment="Stretch" VerticalAlignment="Bottom" Grid.ColumnSpan="2" Grid.Row="0"
					  ShowsPreview="True" Height="5" ResizeDirection="Rows"/>

            <GridSplitter HorizontalAlignment="Right" VerticalAlignment="Stretch" Grid.Column="0" Grid.RowSpan="1"
					  ShowsPreview="True" Width="5" ResizeDirection="Columns"/>
        </Grid>

	</DockPanel>

</Window>
